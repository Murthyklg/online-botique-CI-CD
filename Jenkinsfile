pipeline {
    agent any

   
    stages {
        stage('Deploy To Kubernetes') {
            steps {
               kubeconfig(caCertificate: 'LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lJRWU2dlhScDMyQXd3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TlRFd01USXhOVFUyTXpGYUZ3MHpOVEV3TVRBeE5qQXhNekZhTUJVeApFekFSQmdOVkJBTVRDbXQxWW1WeWJtVjBaWE13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLCkFvSUJBUUM3amJWVVBVRkkyRGI1V1RUYzVtTlBVc1BSaXAvU0ZQalNad3V6VVRFblBxeFJZRkNpcXl2SnZ0YkYKUzBmaHcvdmNrMjNPUE5ETEQwOWZtMkV2ZE9QcURpN0dvWG1IaXZtR3FJN1ZyMU9ia2kwTFFXTUdBOUFVWkRQRwpjUzhwSkRJSnV3bnJFbXR0ekJkbm1TWmVDTkVSRWI0YXg1WGdleGRDdXpzeTBja0xyaU9KQVdzU1Q5bmRxVDdkCjVDNitYQzRiNDYrVEhGKzRneU1NZlN3YnhDTFI1YkREdVJDVTVKTHUvMUNvWnFsOEVMblY5aG9KU3Iybm1mS3AKYXA1bTdpUk1xd3Q3Z0p0dTQrOXEyY29wOURDb3JQakNjZkEvS1dKYXFIb0x0MExmWW1Vb29ydGtvV0RQdjZsYwoxeHpZTzMvZ2Fpbjk3VEJGZnNDZUZnRHJzSnE5QWdNQkFBR2pXVEJYTUE0R0ExVWREd0VCL3dRRUF3SUNwREFQCkJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJUTjd2RmV5cjVSWS9lZ3RGeXdobWlxak90bG16QVYKQmdOVkhSRUVEakFNZ2dwcmRXSmxjbTVsZEdWek1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ2pKRHB1N2hEWgpPY2tkRE92K2d2UFRhNTV3bmRXaGZUT2xrMnJkejBiQlZBczg0eE1BSVpIVkxEdXJLYzBOa1RtY3Z0NzBWVWxTClFPQ2FxVVc5VitqMDIvS0t1amRWaGJ5RG5xYURBVDZ4c2N0d1NmSXVFZEVSU3NrV2VnSklYbTZOUjFNU0FjdnAKTnBDTVRkODJPaXFHWHVzOG5EUEQ5WUpOeWFZclZFSTZRaUpKWjVVSWdub2hOSGRzdzIya0tZb0NqdHoyNDA0MQpDeUNHbURKeU5Cdzg0YmR5dG0zaHFmN2UwaGNDTy9ZZmwzK09rQWJxODg4ZzZmU3FFSnlXMk1HQmk4ZWxPTTZ4CnZqTzFWYVA4Sk9mQUFjdTdBVWlRS2hWaU5JVDBxaE5uKzhXREp4Wms1YllLUG5jbHM0d2U3RG93N2xaSEtZZlIKMGI3em14ZHgvU1M4Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K', credentialsId: 'k8-token', serverUrl: 'https://834A350F08DE441F9233829A74F078C2.gr7.us-east-1.eks.amazonaws.com') {
    sh 'kubectl apply -f deployment-service.yml'
                }
            }
        }
    }
}
