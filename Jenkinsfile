pipeline {
    agent any

   
    stages {
        stage('Deploy To Kubernetes') {
            steps {
               kubeconfig(caCertificate: 'LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lJYmJFalh2Qm1sQXN3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TlRFd01URXhOREkyTkRKYUZ3MHpOVEV3TURreE5ETXhOREphTUJVeApFekFSQmdOVkJBTVRDbXQxWW1WeWJtVjBaWE13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLCkFvSUJBUUNlQVhkbCtWWDhtQVFxUjY0UUs1WDdZSGZ1L0JRYU15L3FKM00wcmFJUzJsMVMwbEJBMldqeXhWa3gKNnRjZjloTGNzRFgyZGVoRzZqT1Y0UGpkTGUxdWxIaUY0bVZ4ODYwblFuT3dFRXA5NHRvaUVUVE1mSGo1cTJSMwo3QzNuRGtVZW5tUEYrNTFrNHlaR1V3K0N3MU9UVFcxRkxJTlZZVm9kTGNtU1QzTTJ4S2V5eTlmam1JbjRTTjVVClFhMHJrU1dnRzkvVStvL3dnc1NXNFlWVVViTnJJcmM2ZHFIbGhOZ1pxVnJiK0RCcFBBVS9TcWRUUG1JbnVYL04Ka09QbnhvcmozOFk5SlJNbFBwcTRkY294ejExd3lDYmNQVnAwek9ZTWEwL3hRRzJBRnIyUVVzdXZVQnZQdytseQptOGs0U1U5MFRFaGJYd25hM1NyRUlHeUdidzczQWdNQkFBR2pXVEJYTUE0R0ExVWREd0VCL3dRRUF3SUNwREFQCkJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJSRHZmSkFPQ0VibHNrekd1azAvVmduZW03dCtEQVYKQmdOVkhSRUVEakFNZ2dwcmRXSmxjbTVsZEdWek1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQUcxallwK29mMwpSaWppWnk1aHY4ZkVRczUwL29tSkhUaDFPMHRPVy9Nd2tmeFVRVHovUkJvL0xaeWs5VmlzQk9YV1MrTFVEemMxCkR3U1Vvd2pOUTN4Tk11TnA4a1g2RC92emtBekZkeGd4L1cweUJNWkNjb1I0UEttcTFxNWxLK1RyNEc4NzNXdkUKYUQ5Mm53UDlrczZXL2QxaDc1TWFMcFV1ZlJWdGVzSktva29xTi9XZWVlcXllc1ovMFY5TmlXeG1FVThRaUVZOQpjaXBBTUoxK2JXczZiOWYwWTh6NE5kOEZjazRzZ0Rhci9Db0pCa1ZMbkhYSm9FWnNHR2oxSVNiOTFFOHpwZXZUCjBKblJlVXNTUVlNMmxBVUZ1VktFczZBUzAxNWc3OTBINk4zSElkK2QyNjJLUlBRNXozdnhocmRDQXlxSmRiODcKS3JWZ3h1Wmk2eCtkCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K', credentialsId: 'k8-token', serverUrl: 'https://2F94A4306FAD26A96F10D35D827BFE25.gr7.us-east-1.eks.amazonaws.com') {
                    sh 'kubectl apply -f deployment-service.yml'
                }
            }
        }
    }
}
